

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8. Trabajando con esquemas: FeatureType &#8212; gvsig 0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../../_static/gvSIG.ico"/>
    <link rel="top" title="gvsig 0 documentation" href="../../../index.html" />
    <link rel="up" title="Documentación de Scripting en gvSIG 2.3" href="index.html" />
    <link rel="next" title="9. Trabajando con capas: FLayer" href="trabajando_con_capas.html" />
    <link rel="prev" title="4. Módulo commonsdialog" href="modulo_commonsdialog.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="trabajando_con_capas.html" title="9. Trabajando con capas: FLayer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="modulo_commonsdialog.html" title="4. Módulo commonsdialog"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">gvSIG Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Documentación de gvSIG (ES)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Documentación de Scripting en gvSIG 2.3</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/gvsig_asoc.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8. Trabajando con esquemas: FeatureType</a><ul>
<li><a class="reference internal" href="#creando-esquemas">8.1. Creando esquemas</a></li>
<li><a class="reference internal" href="#modificando-esquemas">8.2. Modificando esquemas</a></li>
<li><a class="reference internal" href="#esquema-para-capas-vectoriales">8.3. Esquema para capas vectoriales</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="modulo_commonsdialog.html"
                        title="previous chapter">4. Módulo commonsdialog</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="trabajando_con_capas.html"
                        title="next chapter">9. Trabajando con capas: FLayer</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/es/scripting_devel_guide/2.3/trabajando_con_esquemas.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <gcse:search></gcse:search>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script>
  (function() {
    var cx = '000928295531310476676:vy4vt1ahxhe';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="trabajando-con-esquemas-featuretype">
<h1>8. Trabajando con esquemas: FeatureType<a class="headerlink" href="#trabajando-con-esquemas-featuretype" title="Permalink to this headline">¶</a></h1>
<p>Los descriptores contienen la información sobre el nombre, tipo, precisión, etc de los campos en nuestros contenedores de datos.</p>
<p>Según sea su uso tendrán que cumplir ciertos requisitos. Por ejemplo, si creamos una capa vectorial, su esquema tiene que tener obligatoriamente un campo <strong>GEOMETRY</strong> establecido.</p>
<div class="section" id="creando-esquemas">
<h2>8.1. Creando esquemas<a class="headerlink" href="#creando-esquemas" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt>
<code class="descname">createFeatureType([schema=None]):</code></dt>
<dd><p>Create an empty schema. If parameter schema is a <a class="reference external" href="http://downloads.gvsig.org/download/gvsig-desktop-testing/dists/2.3.0/javadocs/html/org/gvsig/fmap/dal/feature/impl/DefaultEditableFeatureType.html">DefaultEditableFeatureType</a>, creates a copy of this schema <a class="reference external" href="http://downloads.gvsig.org/download/gvsig-desktop-testing/dists/2.3.0/javadocs/html/org/gvsig/fmap/dal/feature/impl/DefaultFeatureType.html">DefaultFeatureType</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>schema</strong> (<a class="reference external" href="http://downloads.gvsig.org/download/gvsig-desktop-testing/dists/2.3.0/javadocs/html/org/gvsig/fmap/dal/feature/impl/DefaultEditableFeatureType.html">DefaultEditableFeatureType</a>) &#8211; Schema from other layer</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">empty schema or a copy of a schema</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>La interfaz <a class="reference external" href="http://downloads.gvsig.org/download/gvsig-desktop-testing/dists/2.3.0/javadocs/html/org/cresques/DataTypes.html">DataTypes</a> especifica un conjunto de constantes indicando los tipos de datos soportados por DAL.</p>
<p>Vamos a ver como crear un esquema con dos campos y asignale este esquema a una nueva tabla:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gvsig</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">gvsig.geom</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">createFeatureType</span><span class="p">()</span> <span class="c1"># DefaultFeatureType</span>

        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

        <span class="n">dbf</span> <span class="o">=</span> <span class="n">createDBF</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

        <span class="n">d</span> <span class="o">=</span> <span class="n">loadDBF</span><span class="p">(</span> <span class="n">dbf</span><span class="o">.</span><span class="n">getFullName</span><span class="p">())</span> <span class="c1"># Carga tabla en el proyecto</span>
</pre></div>
</div>
<p>También podemos crear un esquema nuevo basado en otro ya existente, muy útil para cuando queramos hacer copias de capas. Para pasar un esquema para la creación de capas debe ser de tipo <strong>DefaultFeatureType</strong>, la función :py:func:<code class="docutils literal"><span class="pre">createFeatureType()</span></code> convierte el esquema de tipo <a class="reference external" href="http://downloads.gvsig.org/download/gvsig-desktop-testing/dists/2.3.0/javadocs/html/org/gvsig/fmap/dal/feature/impl/DefaultEditableFeatureType.html">DefaultEditableFeatureType</a> en el necesario:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gvsig</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">gvsig.geom</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">createFeatureType</span><span class="p">()</span> <span class="c1"># DefaultFeatureType</span>

        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

        <span class="n">dbf_1</span> <span class="o">=</span> <span class="n">createDBF</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>

        <span class="n">dbf_schema</span> <span class="o">=</span> <span class="n">dbf_1</span><span class="o">.</span><span class="n">getSchema</span><span class="p">()</span> <span class="c1"># DefaultEditableFeatureType</span>

        <span class="c1"># Nuevo esquema basado en el de otra capa</span>
        <span class="n">new_schema</span> <span class="o">=</span> <span class="n">createSchema</span><span class="p">(</span><span class="n">dbf_schema</span><span class="p">)</span>
        <span class="n">new_schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CODE&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

        <span class="n">dbf_2</span> <span class="o">=</span> <span class="n">createDBF</span><span class="p">(</span><span class="n">new_schema</span><span class="p">)</span>
</pre></div>
</div>
<p>Una forma de acceder a los descriptores contenidos en el esquema es mediante <code class="docutils literal"><span class="pre">schema.get(&quot;Campo&quot;)</span></code>. También podemos iterar sobre ellos. En el siguiente ejemplo, vemos la forma de añadir diferentes campos de diferentes tipos a un esquema nuevo. Hemos preparado una función que itera sobre ellos para mostrar una información completa sobre el esquema que le pasemos como parámetro, quedando:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gvsig</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">gvsig.geom</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">showInfoFeatureType</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
        <span class="c1">#Show schema</span>
        <span class="n">attrSchema</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">getAttrNames</span><span class="p">()</span>
        <span class="nb">print</span> <span class="s2">&quot;Schema attr: &quot;</span><span class="p">,</span> <span class="n">attrSchema</span>
        <span class="c1">#First field in schema</span>
        <span class="n">field1</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Description of the fields</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Fields description&quot;</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s2">&quot; Name: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">DataTypeName: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getDataTypeName</span><span class="p">(),</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Type: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getType</span><span class="p">(),</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">SubType: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getSubtype</span><span class="p">(),</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Precision: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getPrecision</span><span class="p">(),</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Size: &quot;</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">getDataTypeName</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Geometry&#39;</span><span class="p">:</span>
                  <span class="n">geomType</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">getGeomType</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Geom Name: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Geom FullName: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Type: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">SubType: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getSubType</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">GeometryClass: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getGeometryClass</span><span class="p">()</span>
                  <span class="nb">print</span> <span class="s2">&quot; </span><span class="se">\t</span><span class="s2">Dimension: &quot;</span><span class="p">,</span> <span class="n">geomType</span><span class="o">.</span><span class="n">getDimension</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">createFeatureType</span><span class="p">()</span>

        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;AREA&quot;</span><span class="p">,</span> <span class="s2">&quot;DOUBLE&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;FECHA&quot;</span><span class="p">,</span> <span class="s2">&quot;DATE&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ACTIVE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOOLEAN&quot;</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;GEOMETRY&quot;</span><span class="p">,</span> <span class="s2">&quot;GEOMETRY&quot;</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;GEOMETRY&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setGeometryType</span><span class="p">(</span><span class="n">POINT</span><span class="p">,</span> <span class="n">D2</span><span class="p">)</span>

        <span class="n">shape</span> <span class="o">=</span> <span class="n">createShape</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">prefixname</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">currentView</span><span class="p">()</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">showInfoFeatureType</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
<p>Por consola se muestra:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Schema</span> <span class="n">attr</span><span class="p">:</span>  <span class="p">[</span><span class="s1">u&#39;ID&#39;</span><span class="p">,</span> <span class="s1">u&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">u&#39;AREA&#39;</span><span class="p">,</span> <span class="s1">u&#39;FECHA&#39;</span><span class="p">,</span> <span class="s1">u&#39;ACTIVE&#39;</span><span class="p">,</span> <span class="s1">u&#39;GEOMETRY&#39;</span><span class="p">]</span>

<span class="n">Fields</span> <span class="n">description</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">ID</span>      <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">Integer</span>          <span class="n">Type</span><span class="p">:</span>  <span class="mi">4</span>        <span class="n">SubType</span><span class="p">:</span>  <span class="kc">None</span>          <span class="n">Precision</span><span class="p">:</span>  <span class="mi">0</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">10</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">NAME</span>    <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">String</span>   <span class="n">Type</span><span class="p">:</span>  <span class="mi">8</span>        <span class="n">SubType</span><span class="p">:</span>  <span class="kc">None</span>          <span class="n">Precision</span><span class="p">:</span>  <span class="mi">0</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">20</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">AREA</span>    <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">Double</span>   <span class="n">Type</span><span class="p">:</span>  <span class="mi">7</span>        <span class="n">SubType</span><span class="p">:</span>  <span class="kc">None</span>          <span class="n">Precision</span><span class="p">:</span>  <span class="mi">4</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">20</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">FECHA</span>   <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">Date</span>     <span class="n">Type</span><span class="p">:</span>  <span class="mi">9</span>        <span class="n">SubType</span><span class="p">:</span>  <span class="n">Date</span>          <span class="n">Precision</span><span class="p">:</span>  <span class="mi">0</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">20</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">ACTIVE</span>          <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">Boolean</span>          <span class="n">Type</span><span class="p">:</span>  <span class="mi">1</span>        <span class="n">SubType</span><span class="p">:</span>  <span class="kc">None</span>          <span class="n">Precision</span><span class="p">:</span>  <span class="mi">0</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">0</span>
 <span class="n">Name</span><span class="p">:</span>  <span class="n">GEOMETRY</span>        <span class="n">DataTypeName</span><span class="p">:</span>  <span class="n">Geometry</span>         <span class="n">Type</span><span class="p">:</span>  <span class="mi">66</span>       <span class="n">SubType</span><span class="p">:</span>  <span class="n">Geometry</span>      <span class="n">Precision</span><span class="p">:</span>  <span class="mi">0</span>   <span class="n">Size</span><span class="p">:</span>  <span class="mi">0</span>
        <span class="n">Geom</span> <span class="n">Name</span><span class="p">:</span>  <span class="n">Point2D</span>
        <span class="n">Geom</span> <span class="n">FullName</span><span class="p">:</span>  <span class="n">Point</span><span class="p">:</span><span class="mi">2</span><span class="n">D</span>
        <span class="n">Type</span><span class="p">:</span>  <span class="mi">1</span>
        <span class="n">SubType</span><span class="p">:</span>  <span class="mi">0</span>
        <span class="n">GeometryClass</span><span class="p">:</span>  <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">&#39;org.gvsig.fmap.geom.jts.primitive.point.Point2D&#39;</span><span class="o">&gt;</span>
        <span class="n">Dimension</span><span class="p">:</span>  <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="modificando-esquemas">
<h2>8.2. Modificando esquemas<a class="headerlink" href="#modificando-esquemas" title="Permalink to this headline">¶</a></h2>
<p>En el siguiente ejemplo, vamos a modificar un esquema:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gvsig</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">gvsig.geom</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">createFeatureType</span><span class="p">()</span> <span class="c1"># DefaultFeatureType</span>

        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CODE&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>


        <span class="c1"># By index</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s2">&quot;Remove descriptor ID: &quot;</span><span class="p">,</span> <span class="n">schema</span><span class="o">.</span><span class="n">getAttrNames</span><span class="p">()</span>

        <span class="c1"># By descriptor</span>
        <span class="n">rm</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">getEditableAttributeDescriptor</span><span class="p">(</span><span class="s2">&quot;CODE&quot;</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rm</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s2">&quot;Remove descriptor CODE: &quot;</span><span class="p">,</span> <span class="n">schema</span><span class="o">.</span><span class="n">getAttrNames</span><span class="p">()</span>

        <span class="c1"># Add geometry field</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;GEOMETRY&quot;</span><span class="p">,</span> <span class="s2">&quot;GEOMETRY&quot;</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;GEOMETRY&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setGeometryType</span><span class="p">(</span><span class="n">POINT</span><span class="p">,</span> <span class="n">D2</span><span class="p">)</span>
        <span class="nb">print</span> <span class="s2">&quot;Add geometry field: &quot;</span><span class="p">,</span> <span class="n">schema</span><span class="o">.</span><span class="n">getAttrNames</span><span class="p">()</span>
</pre></div>
</div>
<p>Muestra por consola lo siguiente:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Remove</span> <span class="n">descriptor</span> <span class="n">ID</span><span class="p">:</span>  <span class="p">[</span><span class="s1">u&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">u&#39;CODE&#39;</span><span class="p">]</span>
<span class="n">Remove</span> <span class="n">descriptor</span> <span class="n">CODE</span><span class="p">:</span>  <span class="p">[</span><span class="s1">u&#39;NAME&#39;</span><span class="p">]</span>
<span class="n">Add</span> <span class="n">geometry</span> <span class="n">field</span><span class="p">:</span>  <span class="p">[</span><span class="s1">u&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">u&#39;GEOMETRY&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="esquema-para-capas-vectoriales">
<h2>8.3. Esquema para capas vectoriales<a class="headerlink" href="#esquema-para-capas-vectoriales" title="Permalink to this headline">¶</a></h2>
<p>Para la creación de una capa vectorial sería un ejemplo muy similar, solamente debería de contener un campo <code class="docutils literal"><span class="pre">GEOMETRY</span></code> de tipo <code class="docutils literal"><span class="pre">GEOMETRY</span></code>. Después de crear este campo, tenemos que establecer el tipo de geometría que contendrá.</p>
<p>En este ejemplo mostramos el caso típico de creación de una capa vectorial nueva:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gvsig</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">gvsig.geom</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">createFeatureType</span><span class="p">()</span> <span class="c1"># DefaultFeatureType</span>

        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;GEOMETRY&quot;</span><span class="p">,</span> <span class="s2">&quot;GEOMETRY&quot;</span><span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;GEOMETRY&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setGeometryType</span><span class="p">(</span><span class="n">POINT</span><span class="p">,</span> <span class="n">D2</span><span class="p">)</span>

        <span class="n">shape</span> <span class="o">=</span> <span class="n">createShape</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
        <span class="n">currentView</span><span class="p">()</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="trabajando_con_capas.html" title="9. Trabajando con capas: FLayer"
             >next</a> |</li>
        <li class="right" >
          <a href="modulo_commonsdialog.html" title="4. Módulo commonsdialog"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">gvSIG Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Documentación de gvSIG (ES)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Documentación de Scripting en gvSIG 2.3</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, gvSIG Association.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>